name: Run Locust Test

on:
  workflow_dispatch:

jobs:
  call-load-test:
    uses: ./.github/workflows/locust-loadtest.yml
    with:
      host: 'https://jsonplaceholder.typicode.com'
      users: 10
      spawn_rate: 1
      duration: 10s
      csv_prefix: todo-test
      config: |
        {
          "apis": [
            { "url": "/todos/1", "method": "GET", "assert": { "status_code" : 300 } }
          ]
        }
